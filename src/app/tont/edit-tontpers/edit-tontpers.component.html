<div class="row">
    <div class="panel-heading">
      <h3> {{ title }} </h3>
    </div>
    <div *ngIf="tontpers" >
      <form [formGroup]="angForm" (ngSubmit)="updateTontPers(angForm.value)" autocomplete="off">
        <table>
          <tr>
            <th width=45%></th>
            <th width=10%></th>
            <th width=45%></th>
          </tr>
          <tr>
            <th>
              <div class="form-group">
                <label class="col-md-6"> Tontine </label>
                <select disabled class="form-control" formControlName="tont_id" #tont_id [(ngModel)]="tontpers.tont_id">
                    <option [selected]="isSelected">Choisir une tontine</option>
                  <option *ngFor="let tont of tonts" value={{tont.id}}>
                     {{tont.nom}}  
                  </option>
                </select>
              </div>
              <div *ngIf="angForm.controls['tont_id'].invalid && 
                        (angForm.controls['tont_id'].dirty || angForm.controls['tont_id'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['tont_id'].errors.required">
                  La tontine est obligatoire.
                </div>
              </div>
            </th>
            <th></th>
            <th>
              <div class="form-group">
                <label class="col-md-6"> Personne </label>
                <select disabled class="form-control" formControlName="pers_id" #pers_id [(ngModel)]="tontpers.pers_id">
                  <option *ngFor="let pers of personnes" value={{pers.id}}>
                    {{pers.nom}}  {{pers.prenom}}
                  </option>
                </select>
              </div>
              <div *ngIf="angForm.controls['pers_id'].invalid && (angForm.controls['pers_id'].dirty || angForm.controls['pers_id'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['pers_id'].errors.required">
                  La personne est obligatoire.
                </div>
              </div>
  
            </th>
          </tr>
  
          <tr>
            <th>
  
              <div class="form-group">
                <label class="col-md-8"> Alias du tontineur </label>
                <input type="text" class="form-control" formControlName="alias" #alias [(ngModel)]="tontpers.alias" />
              </div>
  
            </th>
            <th></th>
            <th>
  
              <div class="form-group">
                <label class="col-md-4"> position </label>
                <input type="text" class="form-control" formControlName="position" #position [(ngModel)]="tontpers.position" />
              </div>
              <div *ngIf="angForm.controls['position'].invalid && (angForm.controls['position'].dirty || angForm.controls['position'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['position'].errors.required">
                  La position est obligatoire.
                </div>
              </div>
            </th>
          </tr>
  
          <tr>
            <th>
              <div class="form-group">
                <label class="col-md-4"> Statut </label>
                <input type="text" class="form-control" formControlName="statut" #statut [(ngModel)]="tontpers.statut" />
              </div>
            </th>
            <th></th>
            <th>
  
              <div class="form-group">
                <label class="col-md-6"> Date statut </label>
                <input type="text" class="form-control" formControlName="dt_statut" #dt_statut placeholder="YYYY-MM-DD" [(ngModel)]="tontpers.dt_statut" />
              </div>
              <div *ngIf="angForm.controls['dt_statut'].invalid && (angForm.controls['dt_statut'].dirty || angForm.controls['dt_statut'].touched)"
                class="alert alert-danger">
                <div *ngIf="angForm.controls['dt_statut'].errors.required">
                  La date du changement est obligatoire.
                </div>
              </div>
            </th>
          </tr>
  
          <tr>
            <th>
              <div class="form-group">
                <label class="col-md-8"> Mois gain </label>
                <input type="text" class="form-control" formControlName="moisgain" #moisgain [(ngModel)]="tontpers.moisgain" />
              </div>
            </th>
          </tr>
          <tr>
            <th colspan="3">
              <div class="form-group">
                <label class="col-md-4"> Commentaire </label>
                <textarea class="form-control rounded-0" formControlName="comment" #comment placeholder="commentaires..." [(ngModel)]="tontpers.comment" 
                  rows="3"></textarea>
              </div>
            </th>
          </tr>
        </table>
  
        <div class="form-group">
          <button [disabled]="angForm.pristine || angForm.invalid" class="btn btn-primary">Ajouter</button>
          <button type="button" (click)="cancel()" class="btn btn-default">Annuler</button>
        </div>
      </form>
    </div>
  </div>